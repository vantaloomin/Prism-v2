<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aethel Saga - Gacha Collection</title>
    <link rel="icon" type="image/x-icon" href="/assets/favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="/styles/tabs.css">
    <link rel="stylesheet" href="/styles/frames.css">
    <link rel="stylesheet" href="/styles/holos.css">
    <link rel="stylesheet" href="/styles/collection.css">
    <link rel="stylesheet" href="/styles/focus.css">
    <link rel="stylesheet" href="/styles/game-selection.css">
    <link rel="stylesheet" href="/styles/game-rps.css">
    <link rel="stylesheet" href="/styles/game-ttt.css">
    <link rel="stylesheet" href="/styles/game-blackjack.css">
    <link rel="stylesheet" href="/styles/game-legacy.css">
    <link rel="stylesheet" href="/styles/landing.css">
    <link rel="stylesheet" href="/styles/settings.css">
</head>

<body>
    <!-- Mobile Viewport Blocker -->
    <div class="mobile-blocker" id="mobile-blocker">
        <div class="mobile-blocker-content">
            <div class="mobile-blocker-icon">
                <img src="/assets/ui/main-logo-icon.webp" alt="Aethel Saga" class="mobile-blocker-logo">
            </div>
            <h1 class="mobile-blocker-brand">Aethel Saga</h1>
            <h2 class="mobile-blocker-title">Desktop Required</h2>
            <p class="mobile-blocker-message">
                Aethel Saga is designed for larger screens to showcase stunning card art and holographic effects.
            </p>
            <p class="mobile-blocker-hint">
                Please visit us on a desktop or laptop computer for the best experience.
            </p>
            <div class="mobile-blocker-specs">
                <span>Minimum: 1024 × 768</span>
            </div>
        </div>
    </div>

    <!-- Landing Page / Main Menu -->
    <div class="landing-page" id="landing-page">
        <div class="landing-bg"></div>

        <!-- Credits display -->
        <div class="landing-credits">
            <img class="credits-icon" src="/assets/ui/icon-currency.webp" alt="Credits">
            <span class="credits-amount" id="landing-credits-amount">1000</span>
        </div>

        <!-- Options button -->
        <button class="landing-options" id="btn-landing-settings">
            <img src="/assets/ui/icon-settings.webp" alt="Settings" class="landing-options-icon">
            <span>Options</span>
        </button>

        <!-- Title -->
        <div class="landing-title">
            <img src="/assets/ui/main-logo.webp" alt="Aethel Saga" class="landing-logo">
            <h1 class="landing-logo-text">Aethel Saga</h1>
            <p class="landing-subtitle">Gacha Collection</p>
        </div>

        <!-- Main Menu Cards -->
        <div class="landing-menu">
            <div class="menu-card" data-menu="games" id="menu-games">
                <div class="menu-card-icon"><img src="/assets/ui/icon-game.webp" alt="Games"></div>
                <div class="menu-card-label">Games</div>
            </div>
            <div class="menu-card" data-menu="shop" id="menu-shop">
                <div class="menu-card-icon"><img src="/assets/ui/icon-open-pack.webp" alt="Open Packs"></div>
                <div class="menu-card-label">Open Packs</div>
            </div>
            <div class="menu-card" data-menu="collection" id="menu-collection">
                <div class="menu-card-icon"><img src="/assets/ui/icon-collection.webp" alt="Collection"></div>
                <div class="menu-card-label">Collection</div>
            </div>
        </div>
    </div>

    <!-- Unified Top Bar -->
    <header class="top-bar hidden" id="top-bar">
        <div class="top-bar-left">
            <button class="top-bar-home" id="btn-home">
                <img class="icon" src="/assets/ui/icon-home.webp" alt="Home">
                <span>Home</span>
            </button>
        </div>
        <div class="top-bar-center">
            <span class="top-bar-title" id="top-bar-title">
                <img class="icon" src="/assets/ui/icon-open-pack.webp" alt="">
                <span>Open Pack</span>
            </span>
        </div>
        <div class="top-bar-right">
            <div class="top-bar-credits">
                <img class="icon" src="/assets/ui/icon-currency.webp" alt="Credits">
                <span class="amount" id="credits-amount">1000</span>
            </div>
            <button class="top-bar-settings" id="btn-settings">
                <img src="/assets/ui/icon-settings.webp" alt="Settings" class="settings-icon">
            </button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="main-content hidden" id="main-content">
        <div class="content-area">

            <!-- Tab Content: Shop -->
            <section class="tab-content active" id="tab-content-shop">
                <div class="game-stage" id="game-stage">
                    <div class="pack-shop" id="pack-shop">
                        <!-- Pack buttons are generated dynamically by shop.js -->
                        <div class="pack-buttons" id="pack-buttons-container">
                            <!-- Loading indicator shown until packs load -->
                            <div class="pack-loading">Loading packs...</div>
                        </div>
                    </div>

                    <!-- Card Display Area -->
                    <div class="card-display-area" id="card-display-area"></div>

                    <!-- Pack Animation Container -->
                    <div class="pack-animation-container" id="pack-animation-container" hidden>
                        <div class="pack-wrapper">
                            <div class="pack-image" id="pack-image"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tab Content: Collection -->
            <section class="tab-content" id="tab-content-collection">
                <div class="collection-header">
                    <div class="collection-stats">
                        <span class="stat-item">
                            <span class="stat-value" id="unique-count">0</span>
                            <span class="stat-label">Unique</span>
                        </span>
                        <span class="stat-divider">|</span>
                        <span class="stat-item">
                            <span class="stat-value" id="total-count">0</span>
                            <span class="stat-label">Total Cards</span>
                        </span>
                    </div>

                </div>

                <!-- Collection Grid (sorted by rarity) -->
                <div class="collection-container" id="collection-container">
                    <!-- Cards will be rendered here, grouped and sorted -->
                </div>

                <!-- Scroll to Top Button -->
                <button class="scroll-to-top-btn" id="scroll-to-top-btn" aria-label="Scroll to top">
                    ▲
                </button>
            </section>

            <!-- Tab Content: Games (VN-Style) -->
            <section class="tab-content vn-scene" id="tab-content-games">
                <!-- Full-bleed fantasy background -->
                <div class="vn-background"></div>

                <!-- VN Avatar (left side) -->
                <div class="vn-avatar-container">
                    <img class="vn-avatar" id="vn-avatar" src="assets/games/avatars/avatar_welcome.webp" alt="Game Host"
                        onerror="this.style.display='none';">
                </div>

                <!-- Parchment Dialogue Box -->
                <div class="vn-dialogue-box" id="vn-dialogue-box">
                    <p class="vn-dialogue-text" id="vn-dialogue-text">
                        Select a game to play.
                    </p>
                </div>

                <!-- Game Selection Badges -->
                <div class="vn-game-badges" id="games-selection-container">
                    <!-- Rendered by games.js -->
                </div>


                <!-- Game Play Area (hidden until game starts) -->
                <div class="game-play-area" id="games-play-area">
                    <!-- Active game content will be rendered here -->
                </div>
            </section>

        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav hidden" id="bottom-nav">
        <button class="nav-btn active" id="nav-shop" data-tab="shop">
            <img class="nav-icon" src="/assets/ui/icon-open-pack.webp" alt="Packs">
            <span class="nav-label">Packs</span>
        </button>
        <button class="nav-btn" id="nav-games" data-tab="games">
            <img class="nav-icon" src="/assets/ui/icon-game.webp" alt="Games">
            <span class="nav-label">Games</span>
        </button>
        <button class="nav-btn" id="nav-collection" data-tab="collection">
            <img class="nav-icon" src="/assets/ui/icon-collection.webp" alt="Collection">
            <span class="nav-label">Collection</span>
            <span class="nav-badge" id="collection-badge">0</span>
        </button>
    </nav>

    <!-- Card Focus Overlay -->
    <div class="card-focus-overlay" id="card-focus-overlay" hidden>
        <div class="focus-backdrop"></div>
        <div class="focus-container">
            <div class="focus-card-wrapper" id="focus-card-wrapper">
                <!-- Focused card will be cloned here -->
            </div>
            <div class="focus-info" id="focus-info">
                <!-- Card info will go here -->
            </div>
        </div>
        <button class="focus-close-btn" id="focus-close-btn">✕ Close</button>
        <div class="focus-hint">Move mouse to interact with holographic effects</div>
    </div>

    <!-- Settings Modal -->
    <div class="settings-overlay" id="settings-overlay">
        <div class="settings-modal">
            <div class="settings-header">
                <div class="settings-title">
                    <img class="icon" src="/assets/ui/icon-settings.webp" alt="Settings">
                    <span>Settings</span>
                </div>
                <button class="settings-close" id="settings-close">✕</button>
            </div>

            <!-- Tab Navigation -->
            <div class="settings-tabs">
                <button class="settings-tab active" data-settings-tab="general">General</button>
                <button class="settings-tab" data-settings-tab="audio">Audio</button>
                <button class="settings-tab" data-settings-tab="data">Data</button>
            </div>

            <!-- Tab Content (scrollable) -->
            <div class="settings-tab-content">

                <!-- General Tab -->
                <div class="settings-panel active" data-settings-panel="general">
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <span class="settings-item-label">Animations</span>
                            <span class="settings-item-desc">Enable holographic and visual effects</span>
                        </div>
                        <label class="settings-toggle">
                            <input type="checkbox" id="toggle-animations" checked>
                            <div class="toggle-track">
                                <div class="toggle-thumb"></div>
                            </div>
                        </label>
                    </div>
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <span class="settings-item-label">Debug Mode</span>
                            <span class="settings-item-desc">Show debug packs (God, Frame, Holo)</span>
                        </div>
                        <label class="settings-toggle">
                            <input type="checkbox" id="toggle-debug-mode">
                            <div class="toggle-track">
                                <div class="toggle-thumb"></div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Audio Tab -->
                <div class="settings-panel" data-settings-panel="audio">
                    <!-- SFX Toggle + Slider -->
                    <div class="settings-item settings-audio-item">
                        <div class="settings-item-info">
                            <span class="settings-item-label">Sound Effects</span>
                            <span class="settings-item-desc">Game sounds and UI feedback</span>
                        </div>
                        <label class="settings-toggle">
                            <input type="checkbox" id="toggle-sfx">
                            <div class="toggle-track">
                                <div class="toggle-thumb"></div>
                            </div>
                        </label>
                    </div>
                    <div class="settings-volume-row" id="sfx-volume-row">
                        <span class="settings-volume-label">Volume</span>
                        <input type="range" class="settings-slider" id="slider-sfx" min="0" max="100" value="80">
                        <span class="settings-volume-value" id="sfx-volume-value">80%</span>
                    </div>

                    <!-- Voice Toggle + Slider -->
                    <div class="settings-item settings-audio-item">
                        <div class="settings-item-info">
                            <span class="settings-item-label">Voice</span>
                            <span class="settings-item-desc">Character voiceover lines</span>
                        </div>
                        <label class="settings-toggle">
                            <input type="checkbox" id="toggle-voice">
                            <div class="toggle-track">
                                <div class="toggle-thumb"></div>
                            </div>
                        </label>
                    </div>
                    <div class="settings-volume-row" id="voice-volume-row">
                        <span class="settings-volume-label">Volume</span>
                        <input type="range" class="settings-slider" id="slider-voice" min="0" max="100" value="80">
                        <span class="settings-volume-value" id="voice-volume-value">80%</span>
                    </div>

                    <!-- Music Toggle + Slider -->
                    <div class="settings-item settings-audio-item">
                        <div class="settings-item-info">
                            <span class="settings-item-label">Music</span>
                            <span class="settings-item-desc">Background music and ambiance</span>
                        </div>
                        <label class="settings-toggle">
                            <input type="checkbox" id="toggle-music">
                            <div class="toggle-track">
                                <div class="toggle-thumb"></div>
                            </div>
                        </label>
                    </div>
                    <div class="settings-volume-row" id="music-volume-row">
                        <span class="settings-volume-label">Volume</span>
                        <input type="range" class="settings-slider" id="slider-music" min="0" max="100" value="80">
                        <span class="settings-volume-value" id="music-volume-value">80%</span>
                    </div>
                </div>

                <!-- Data Tab -->
                <div class="settings-panel" data-settings-panel="data">
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <span class="settings-item-label">Reset Save Data</span>
                            <span class="settings-item-desc">Clear all cards and reset credits</span>
                        </div>
                        <button class="settings-btn-danger" id="btn-reset">Reset</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Confirmation Dialog -->
    <div class="confirm-overlay" id="confirm-overlay">
        <div class="confirm-modal">
            <div class="confirm-icon">⚠️</div>
            <div class="confirm-title">Delete All Data?</div>
            <div class="confirm-message">
                This will <strong>permanently erase</strong> all your cards, credits, and progress.<br><br>
                This action <strong>cannot be undone</strong>.
            </div>
            <div class="confirm-buttons">
                <button class="confirm-btn confirm-btn-cancel" id="confirm-cancel">Cancel</button>
                <button class="confirm-btn confirm-btn-danger" id="confirm-delete">Delete</button>
            </div>
        </div>
    </div>

    <!-- Vite ES6 Module Entry Point -->
    <script type="module" src="/src/main.js"></script>
</body>

</html>