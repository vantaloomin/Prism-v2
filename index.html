<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aethel Saga - Gacha Collection</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="/styles/tabs.css">
    <link rel="stylesheet" href="/styles/frames.css">
    <link rel="stylesheet" href="/styles/holos.css">
    <link rel="stylesheet" href="/styles/collection.css">
    <link rel="stylesheet" href="/styles/focus.css">
    <link rel="stylesheet" href="/styles/game-selection.css">
    <link rel="stylesheet" href="/styles/game-rps.css">
    <link rel="stylesheet" href="/styles/game-ttt.css">
    <link rel="stylesheet" href="/styles/game-blackjack.css">
    <link rel="stylesheet" href="/styles/game-legacy.css">
    <link rel="stylesheet" href="/styles/landing.css">
    <link rel="stylesheet" href="/styles/settings.css">
</head>

<body>
    <!-- Landing Page / Main Menu -->
    <div class="landing-page" id="landing-page">
        <div class="landing-bg"></div>

        <!-- Credits display -->
        <div class="landing-credits">
            <span class="credits-icon">üíé</span>
            <span class="credits-amount" id="landing-credits-amount">1000</span>
        </div>

        <!-- Options button -->
        <button class="landing-options" id="btn-landing-settings">
            <span>‚öôÔ∏è</span>
            <span>Options</span>
        </button>

        <!-- Title -->
        <div class="landing-title">
            <img src="/assets/ui/main-logo.webp" alt="Aethel Saga" class="landing-logo">
            <h1 class="landing-logo-text">Aethel Saga</h1>
            <p class="landing-subtitle">Gacha Collection</p>
        </div>

        <!-- Main Menu Cards -->
        <div class="landing-menu">
            <div class="menu-card" data-menu="games" id="menu-games">
                <div class="menu-card-icon">üéÆ</div>
                <div class="menu-card-label">Games</div>
            </div>
            <div class="menu-card" data-menu="shop" id="menu-shop">
                <div class="menu-card-icon">üéÅ</div>
                <div class="menu-card-label">Open Packs</div>
            </div>
            <div class="menu-card" data-menu="collection" id="menu-collection">
                <div class="menu-card-icon">üìö</div>
                <div class="menu-card-label">Collection</div>
            </div>
        </div>
    </div>

    <!-- Unified Top Bar -->
    <header class="top-bar hidden" id="top-bar">
        <div class="top-bar-left">
            <button class="top-bar-home" id="btn-home">
                <span class="icon">üè†</span>
                <span>Home</span>
            </button>
        </div>
        <div class="top-bar-center">
            <span class="top-bar-title" id="top-bar-title">
                <span class="icon">üéÅ</span>
                <span>Open Pack</span>
            </span>
        </div>
        <div class="top-bar-right">
            <div class="top-bar-credits">
                <span class="icon">üíé</span>
                <span class="amount" id="credits-amount">1000</span>
            </div>
            <button class="top-bar-settings" id="btn-settings">
                ‚öôÔ∏è
            </button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="main-content hidden" id="main-content">
        <div class="content-area">

            <!-- Tab Content: Shop -->
            <section class="tab-content active" id="tab-content-shop">
                <div class="game-stage" id="game-stage">
                    <div class="pack-shop" id="pack-shop">
                        <div class="pack-buttons">
                            <button class="pack-button waifu-pack" id="btn-waifu-pack" data-pack-type="waifu"
                                data-cost="100">
                                <div class="pack-icon"><img src="/assets/ui/pack_waifu.webp" alt="Waifu Pack"
                                        style="width: 300px; height: auto; object-fit: contain;"></div>
                            </button>
                            <button class="pack-button husbando-pack" id="btn-husbando-pack" data-pack-type="husbando"
                                data-cost="100">
                                <div class="pack-icon"><img src="/assets/ui/pack_husbando.webp" alt="Husbando Pack"
                                        style="width: 300px; height: auto; object-fit: contain;"></div>
                            </button>
                            <button class="pack-button debug-pack-btn" id="btn-debug-pack" data-pack-type="debug"
                                data-cost="100"
                                style="display: none; border-color: #ffd700; background: linear-gradient(145deg, rgba(20,20,20,0.9), rgba(50,40,0,0.9));">
                                <div class="pack-icon">‚ö°</div>
                                <div class="pack-name">God Pack</div>
                            </button>
                            <button class="pack-button debug-pack-btn" id="btn-debug-frame-pack"
                                data-pack-type="debug-frame" data-cost="50"
                                style="display: none; border-color: #a855f7; background: linear-gradient(145deg, rgba(20,20,20,0.9), rgba(40,0,50,0.9));">
                                <div class="pack-icon">üñºÔ∏è</div>
                                <div class="pack-name">Frame Test</div>
                            </button>
                            <button class="pack-button debug-pack-btn" id="btn-debug-holo-pack"
                                data-pack-type="debug-holo" data-cost="150"
                                style="display: none; border-color: #3b82f6; background: linear-gradient(145deg, rgba(20,20,20,0.9), rgba(0,40,50,0.9));">
                                <div class="pack-icon">‚ú®</div>
                                <div class="pack-name">Holo Test</div>
                            </button>
                        </div>
                    </div>

                    <!-- Card Display Area -->
                    <div class="card-display-area" id="card-display-area"></div>

                    <!-- Pack Animation Container -->
                    <div class="pack-animation-container" id="pack-animation-container" hidden>
                        <div class="pack-wrapper">
                            <div class="pack-image" id="pack-image"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tab Content: Collection -->
            <section class="tab-content" id="tab-content-collection">
                <div class="collection-header">
                    <div class="collection-stats">
                        <span class="stat-item">
                            <span class="stat-value" id="unique-count">0</span>
                            <span class="stat-label">Unique</span>
                        </span>
                        <span class="stat-divider">|</span>
                        <span class="stat-item">
                            <span class="stat-value" id="total-count">0</span>
                            <span class="stat-label">Total Cards</span>
                        </span>
                    </div>

                </div>

                <!-- Collection Grid (sorted by rarity) -->
                <div class="collection-container" id="collection-container">
                    <!-- Cards will be rendered here, grouped and sorted -->
                </div>
            </section>

            <!-- Tab Content: Games (VN-Style) -->
            <section class="tab-content vn-scene" id="tab-content-games">
                <!-- Full-bleed fantasy background -->
                <div class="vn-background"></div>

                <!-- VN Avatar (left side) -->
                <div class="vn-avatar-container">
                    <img class="vn-avatar" id="vn-avatar" src="assets/games/avatars/avatar_welcome.webp" alt="Game Host"
                        onerror="this.style.display='none';">
                </div>

                <!-- Parchment Dialogue Box -->
                <div class="vn-dialogue-box" id="vn-dialogue-box">
                    <p class="vn-dialogue-text" id="vn-dialogue-text">
                        Select a game to play.
                    </p>
                </div>

                <!-- Game Selection Badges -->
                <div class="vn-game-badges" id="games-selection-container">
                    <!-- Rendered by games.js -->
                </div>


                <!-- Game Play Area (hidden until game starts) -->
                <div class="game-play-area" id="games-play-area">
                    <!-- Active game content will be rendered here -->
                </div>
            </section>

        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav hidden" id="bottom-nav">
        <button class="nav-btn active" id="nav-shop" data-tab="shop">
            <span class="nav-icon">üéÅ</span>
            <span class="nav-label">Packs</span>
        </button>
        <button class="nav-btn" id="nav-games" data-tab="games">
            <span class="nav-icon">üéÆ</span>
            <span class="nav-label">Games</span>
        </button>
        <button class="nav-btn" id="nav-collection" data-tab="collection">
            <span class="nav-icon">üìö</span>
            <span class="nav-label">Collection</span>
            <span class="nav-badge" id="collection-badge">0</span>
        </button>
    </nav>

    <!-- Card Focus Overlay -->
    <div class="card-focus-overlay" id="card-focus-overlay" hidden>
        <div class="focus-backdrop"></div>
        <div class="focus-container">
            <div class="focus-card-wrapper" id="focus-card-wrapper">
                <!-- Focused card will be cloned here -->
            </div>
            <div class="focus-info" id="focus-info">
                <!-- Card info will go here -->
            </div>
        </div>
        <button class="focus-close-btn" id="focus-close-btn">‚úï Close</button>
        <div class="focus-hint">Move mouse to interact with holographic effects</div>
    </div>

    <!-- Settings Modal -->
    <div class="settings-overlay" id="settings-overlay">
        <div class="settings-modal">
            <div class="settings-header">
                <div class="settings-title">
                    <span class="icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </div>
                <button class="settings-close" id="settings-close">‚úï</button>
            </div>
            <div class="settings-content">
                <div class="settings-item">
                    <div class="settings-item-info">
                        <span class="settings-item-label">Animations</span>
                        <span class="settings-item-desc">Enable holographic and visual effects</span>
                    </div>
                    <label class="settings-toggle">
                        <input type="checkbox" id="toggle-animations" checked>
                        <div class="toggle-track">
                            <div class="toggle-thumb"></div>
                        </div>
                    </label>
                </div>
                <div class="settings-divider"></div>
                <div class="settings-item">
                    <div class="settings-item-info">
                        <span class="settings-item-label">Debug Mode</span>
                        <span class="settings-item-desc">Show debug packs (God, Frame, Holo)</span>
                    </div>
                    <label class="settings-toggle">
                        <input type="checkbox" id="toggle-debug-mode">
                        <div class="toggle-track">
                            <div class="toggle-thumb"></div>
                        </div>
                    </label>
                </div>
                <div class="settings-divider"></div>
                <div class="settings-item">
                    <div class="settings-item-info">
                        <span class="settings-item-label">Reset Save Data</span>
                        <span class="settings-item-desc">Clear all cards and reset credits</span>
                    </div>
                    <button class="settings-btn-danger" id="btn-reset">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Dialog -->
    <div class="confirm-overlay" id="confirm-overlay">
        <div class="confirm-modal">
            <div class="confirm-icon">‚ö†Ô∏è</div>
            <div class="confirm-title">Delete All Data?</div>
            <div class="confirm-message">
                This will <strong>permanently erase</strong> all your cards, credits, and progress.<br><br>
                This action <strong>cannot be undone</strong>.
            </div>
            <div class="confirm-buttons">
                <button class="confirm-btn confirm-btn-cancel" id="confirm-cancel">Cancel</button>
                <button class="confirm-btn confirm-btn-danger" id="confirm-delete">Delete</button>
            </div>
        </div>
    </div>

    <!-- Vite ES6 Module Entry Point -->
    <script type="module" src="/src/main.js"></script>
</body>

</html>